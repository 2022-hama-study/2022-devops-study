# 6. ì‹¤ì „ì— í™œìš© ê°€ëŠ¥í•œ ì»¨í…Œì´ë„ˆ ì‚¬ìš©ë²•ì„ ìµíˆì

## ëª©ì°¨

### "ë‚´ê²Œ í•„ìš”í•œ ì§€ì‹ì´ ë¬´ì—‡ì¸ì§€ ì •ë¦¬í•˜ì"
1. [ì»¨í…Œì´ë„ˆì™€ í˜¸ìŠ¤íŠ¸ ì‚¬ì´ì— íŒŒì¼ ë³µì‚¬](#1-ì»¨í…Œì´ë„ˆì™€-í˜¸ìŠ¤íŠ¸-ì‚¬ì´ì—-íŒŒì¼-ë³µì‚¬-) (â­â­â­) â†’ ê°œë°œì
2. [ë³¼ë¥¨ ë§ˆìš´íŠ¸](#2-ë³¼ë¥¨-ë§ˆìš´íŠ¸) â†’ ê°œë°œì
3. [ì»¨í…Œì´ë„ˆë¡œ ì´ë¯¸ì§€ ë§Œë“¤ê¸°](#3-ì»¨í…Œì´ë„ˆë¡œ-ì´ë¯¸ì§€-ë§Œë“¤ê¸°) â†’ ê°œë°œì
4. [ë„ì»¤íŒŒì¼ë¡œ ì´ë¯¸ì§€ ë§Œë“¤ê¸°](#4-ë„ì»¤íŒŒì¼ë¡œ-ì´ë¯¸ì§€-ë§Œë“¤ê¸°) (â­â­â­â­) â†’ ê°œë°œì
5. [ì»¨í…Œì´ë„ˆ ê°œì¡°](#5-ì»¨í…Œì´ë„ˆ-ê°œì¡°) â†’ ê°œë°œì
6. [ë„ì»¤ í—ˆë¸Œ ë¡œê·¸ì¸](#6-ë„ì»¤-í—ˆë¸Œ-ë¡œê·¸ì¸) â†’ ê°œë°œì ë° ì„œë²„ ì—”ì§€ë‹ˆì–´
7. [ë„ì»¤ ì»´í¬ì¦ˆ](#7-ë„ì»¤-ì»´í¬ì¦ˆ) (â­â­â­) â†’ ê°œë°œì ë° ì„œë²„ ì—”ì§€ë‹ˆì–´
8. [ì¿ ë²„ë„¤í‹°ìŠ¤](#8-ì¿ ë²„ë„¤í‹°ìŠ¤) (â­â­â­) â†’ ì„œë²„ ì—”ì§€ë‹ˆì–´ ë° ë³´ì•ˆ ì—”ì§€ë‹ˆì–´

----

## 1. ì»¨í…Œì´ë„ˆì™€ í˜¸ìŠ¤íŠ¸ ì‚¬ì´ì— íŒŒì¼ ë³µì‚¬ ğŸ‘

### ë³¼ë¥¨ ë§ˆìš´íŠ¸ ì—†ì´ ëª…ë ¹ì–´ë¡œ ë³µì‚¬ê°€ ê°€ëŠ¥í•˜ë‹¤!
(ê°œì¸ì ìœ¼ë¡œ ì™„ì „ ê¿€ê¸°ëŠ¥ì¸ê²ƒ ê°™ë‹¤. ë³¼ë¥¨ ë§ˆìš´íŠ¸ë¥¼ í•˜ì§€ì•Šì•˜ì„ ë•Œ.. 
ë„ì»¤ë¥¼ ë‚´ë¦¬ë©´ ì•ˆë˜ëŠ” ìƒí™©ì´ ì¢…ì¢… ìˆë‹¤.. 
ì´ëŸ´ë•Œë§ˆë‹¤ íŒŒì¼ë‚´ìš©ì„ ì†ìˆ˜ ë³µì‚¬í•´ì„œ ë©”ëª¨ì¥ì— ì˜®ê²¨ë†“ê³  
ë§ˆìš´íŠ¸ ì˜µì…˜ì„ ì¶”ê°€í•œ í›„ ì»¨í…Œì´ë„ˆë¥¼ ì¬ì‹œì‘í–ˆëŠ”ë°
ì´ì   ê·¸ëŸ´ í•„ìš”ê°€ ì—†ë‹¤!!
ì§„ì§œì§„ì§œ ê¿€ê¸°ëŠ¥ì´ë‹¤!!)
- í˜¸ìŠ¤íŠ¸(ë¡œì»¬) â†’ ì»¨í…Œì´ë„ˆ
```bash
$ docker cp [í˜¸ìŠ¤íŠ¸ ê²½ë¡œ] [ì»¨í…Œì´ë„ˆ ì´ë¦„]:[ì»¨í…Œì´ë„ˆ ê²½ë¡œ]
```

- ì»¨í…Œì´ë„ˆ â†’ í˜¸ìŠ¤íŠ¸(ë¡œì»¬)
```bash
$ docker cp [ì»¨í…Œì´ë„ˆ ì´ë¦„]:[ì»¨í…Œì´ë„ˆ ê²½ë¡œ] [í˜¸ìŠ¤íŠ¸ ê²½ë¡œ]
```

---

## 2. ë³¼ë¥¨ ë§ˆìš´íŠ¸

### ìì£¼ ì“°ì§€ëŠ” ì•Šì§€ë§Œ ì§€ìš°ë©´ ì•ˆ ë˜ëŠ” íŒŒì¼ : ë„ì»¤ ë³¼ë¥¨
ë„ì»¤ ì—”ì§„ì´ ê´€ë¦¬í•˜ëŠ” ì˜ì—­ ë‚´ì— ìƒì„±ë˜ëŠ” ì¼ì¢…ì˜ íŒŒí‹°ì…˜  
ë„ì»¤ ì—”ì§„ì˜ ê´€ë¦¬í•˜ì— ìˆìœ¼ë¯€ë¡œ ì‚¬ìš©ìê°€ íŒŒì¼ ìœ„ì¹˜ë¥¼ ì‹ ê²½ ì“¸ í•„ìš”ê°€ ì—†ë‹¤.  
'ë°”íƒ•í™”ë©´ì— ë‚´ë²„ë ¤ ë’€ë‹¤ê°€ ì‹¤ìˆ˜ë¡œ ì§€ì›Œë²„ë¦¬ëŠ”' ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤. â­  
ìš´ì˜ì²´ì œë§ˆë‹¤ ê²½ë¡œë¥¼ ê¸°ì¬í•˜ëŠ” ë°©ì‹ì´ ë‹¤ë¥¸ë° ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ë©´ í™˜ê²½ì— ë”°ë¼ ê²½ë¡œê°€ ë°”ë€ŒëŠ” ì¼ì´ ì—†ë‹¤.  
í•˜ì§€ë§Œ ê´€ë¦¬ ë°©ë²•ì´ ì•„ì£¼ ë³µì¡í•˜ë‹¤.  
ì»¨í…Œì´ë„ˆë¥¼ ê²½ìœ í•˜ì§€ ì•Šê³  ì§ì ‘ ë³¼ë¥¨ì— ì ‘ê·¼í•  ë°©ë²•ì´ ì—†ëŠ”ê²ƒì´ ë‹¨ì ì´ë‹¤.  

-  ë³¼ë¥¨ ìƒì„±
```bash
$ docker volume create [ë³¼ë¥¨ ì´ë¦„]
```

- ë³¼ë¥¨ ì‚­ì œ
```bash
$ docker volume rm [ë³¼ë¥¨ ì´ë¦„]
```

### ìì£¼ ì‚¬ìš©í•˜ëŠ” íŒŒì¼ : ë°”ì¸ë“œ ë§ˆìš´íŠ¸
ë””ë ‰í† ë¦¬ë‚˜ íŒŒì¼ì„ ì§ì ‘ `[í˜¸ìŠ¤íŠ¸ ê²½ë¡œ]:[ì»¨í…Œì´ë„ˆ ê²½ë¡œ]` ë¡œ ì—°ê²°í•˜ëŠ” ë°©ë²•  
íŒŒì¼ì„ **í˜¸ìŠ¤íŠ¸ì—ì„œë„ ì§ì ‘ ìˆ˜ì •í•˜ê±°ë‚˜ ì ‘ê·¼**í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ë©´ **ë°”ì¸ë“œ ë§ˆìš´íŠ¸**ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.  

- ë°”ì¸ë“œ ë§ˆìš´íŠ¸
```bash
$ docker run -v [í˜¸ìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ ë˜ëŠ” íŒŒì¼]:[ì»¨í…Œì´ë„ˆ ë””ë ‰í† ë¦¬ ë˜ëŠ” íŒŒì¼]
```

----

## 3. ì»¨í…Œì´ë„ˆë¡œ ì´ë¯¸ì§€ ë§Œë“¤ê¸°
ì§€ê¸ˆê¹Œì§€ëŠ” ì•„ë§ˆ ë„ì»¤íŒŒì¼ë¡œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í–ˆì„ê²ƒì´ë‹¤.  
í•˜ì§€ë§Œ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì´ìš©í•˜ë©´ ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ì´ë¯¸ì§€ë¥¼ ì¬ìƒì‚° í•  ìˆ˜ ìˆë‹¤.  
(ê°œì¸ì ìœ¼ë¡œ ê¶Œì¥í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.. ì¶”í›„ ê´€ë¦¬ê°€ ê°œíŒì´ ë˜ê¸°ì—..)  
ê¸°ì¡´ ì»¨í…Œì´ë„ˆë¥¼ ë³µì œí•˜ê±°ë‚˜ ì´ë™í•´ì•¼ í•  ë•Œ, ë˜ëŠ” ê°œë°œì¤‘ì— ë³€ê²½ëœ ì‚¬í•­ì´ ë§ì•„ ê¸°ì–µí•˜ê¸° í˜ë“¤ ë•Œ ìœ ìš©í•˜ë‹¤.  
ì´ë¥¼ ì œì™¸í•œ ì¼ë°˜ì ì¸ ìƒí™©ì—ì„œëŠ” ë„ì»¤íŒŒì¼ì„ ì‘ì„±í•˜ëŠ” ìŠµê´€ì„ ë“¤ì´ì..  

- ì»¨í…Œì´ë„ˆ â†’ ì´ë¯¸ì§€ ë³€í™˜
```bash
$ docker commit [ì»¨í…Œì´ë„ˆ ì´ë¦„] [ì €ì¥í•  ì´ë¯¸ì§€ ì´ë¦„]
```

----

## 4. ë„ì»¤íŒŒì¼ë¡œ ì´ë¯¸ì§€ ë§Œë“¤ê¸°
ì´ ì±…ì—ì„œëŠ” ë„ì»¤íŒŒì¼(Dockerfile)ì€ ì´ë¯¸ì§€ ë§Œë“œëŠ” ê²ƒë°–ì— í•  ìˆ˜ ì—†ë‹¤ê³  ì“°ì—¬ìˆì§€ë§Œ,  
ë„ì»¤íŒŒì¼ì—ëŠ” ë§ì€ ì •ë³´ë“¤ì´ í¬í•¨ë˜ê¸° ë•Œë¬¸ì— í•œëˆˆì— í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ *í•œ ëˆˆì—* íŒŒì•…í•  ìˆ˜ ìˆê¸°ë„ í•˜ê³ ,  
ë””íœë˜ì‹œë„ ëª…ì‹œì ìœ¼ë¡œ ê´€ë¦¬ í•  ìˆ˜ ìˆë‹¤.

- Dockerfile ë¡œ ì´ë¯¸ì§€ ìƒì„±í•˜ê¸°
```bash
$ docker build -t [ìƒì„±í•  ì´ë¯¸ì§€ ì´ë¦„] [ë„ì»¤íŒŒì¼ì´ ìœ„ì¹˜í•˜ê³  ìˆëŠ” ê²½ë¡œ]
```

- ì£¼ìš” Dockerfile ì¸ìŠ¤íŠ¸ëŸ­ì…˜  

| ì¸ìŠ¤íŠ¸ëŸ­ì…˜ | ë‚´ìš© |  
|:--------|:----|  
|FROM|í† ëŒ€ê°€ ë˜ëŠ” ì´ë¯¸ì§€ ì§€ì •|  
|ENV|í™˜ê²½ë³€ìˆ˜ ì§€ì •|  
|ARG|docker build ì»¤ë§¨ë“œ ì‚¬ìš© ì‹œ ì…ë ¥ë°›ì„ ìˆ˜ ìˆëŠ” ì¸ì ì„ ì–¸|  
|LABEL|ì´ë¦„ì´ë‚˜ ë²„ì „, ì €ì‘ì ì •ë³´ë¥¼ ì„¤ì •|  
|SHELL|ì´ë¯¸ì§€ ë¹Œë“œ ì‹œ ì‚¬ìš©í•  ì‰˜ ì„¤ì •|  
|ADD|ì›ê²©ì§€ì— ìˆëŠ”(Urlë¡œ ë¶ˆëŸ¬ì™€ì•¼í•˜ëŠ”)íŒŒì¼ì´ë‚˜ í´ë”ë¥¼ ì¶”ê°€|  
|COPY|í˜¸ìŠ¤íŠ¸ì— ìˆëŠ” íŒŒì¼ì´ë‚˜ í´ë”ë¥¼ ì¶”ê°€|  
|RUN|ë¹Œë“œ ì‹œ ì‹¤í–‰í•  ëª…ë ¹ì–´ ì§€ì •|  
|WORKDIR|RUN, CMD, ENTRYPOINT, ADD, COPY ì— ì •ì˜ëœ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” ì‘ì—… ë””ë ‰í† ë¦¬ë¥¼ ì§€ì •|  
|USER|RUN, CMD, ENTRYPOINT ì— ì •ì˜ëœ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” ì‚¬ìš©ì ë˜ëŠ” ê·¸ë£¹ ì§€ì •|  
|CMD|ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ë•Œ ìµœì´ˆ ì‹¤í–‰ í•  ëª…ë ¹ì–´ ì§€ì •(ì˜¤ë²„ë¼ì´ë“œ í—ˆìš©)|  
|ENTRYPOINT|ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ë•Œ ìµœì´ˆ ì‹¤í–‰ í•  ëª…ë ¹ì–´ ì§€ì •(ì˜¤ë²„ë¼ì´ë“œ ë¹„í—ˆìš©)|  
|EXPOSE|ê°•ì œë¡œ í†µì‹ ì— ì‚¬ìš©í•  í¬íŠ¸ë¥¼ ì§€ì •|  

- ADD vs COPY  
ADD ëŠ” ì›ê²©ì§€ì˜ íŒŒì¼ì„ ì´ë¯¸ì§€ ì•ˆì— í¬í•¨ì‹œí‚¤ê³ ì í•  ë•Œ ì‚¬ìš©í•˜ê³ ,  
COPY ëŠ” í˜¸ìŠ¤íŠ¸(ë¡œì»¬) íŒŒì¼ì„ ì´ë¯¸ì§€ ì•ˆì— í¬í•¨ì‹œì¼œì•¼ í•  ë•Œ ì‚¬ìš©í•œë‹¤.

- CMD vs ENTRYPOINT  
CMD ì™€ ENTRYPOINT ì˜ ì—­í• ì€ ê°™ì§€ë§Œ, ì°¨ì´ê°€ ì¡°ê¸ˆ ìˆë‹¤.  
ì˜ˆë¥¼ ë“¤ì–´ `CMD ["echo", "hello"]` ë¼ê³  ì§€ì •í–ˆë‹¤ë©´,  
ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ í•  ë•Œ `docker run [ì´ë¯¸ì§€ ì´ë¦„] echo hi` ë¼ê³  í•˜ë©´ helloê°€ ì¶œë ¥ë˜ì§€ ì•Šê³  hiê°€ ì¶œë ¥ëœë‹¤.  
í•˜ì§€ë§Œ `ENTRYPOINT ["echo", "hi"]` ë¡œ ì§€ì •í–ˆì„ ë•ŒëŠ” hello hi ë‘˜ ë‹¤ ì¶œë ¥ëœë‹¤.  
ëª…ë ¹ì–´ê°€ ì˜¤ë²„ë¼ì´ë“œ ë˜ì§€ ì•Šê³  ê°•ì œì‹¤í–‰, ê³ ì •ë˜ëŠ” ê²ƒì´ë‹¤.  
`ENTRYPOINT`ëŠ” ë‹¤ë¥¸ ëª…ë ¹ì–´ê°€ ë“¤ì–´ì™€ë„ ë¬´ì¡°ê±´ ì‹¤í–‰í•´ì•¼í•˜ëŠ” ëª…ë ¹ì–´ê°€ ìˆì„ ë•Œ ì‚¬ìš©í•œë‹¤.

----

## 5. ì»¨í…Œì´ë„ˆ ê°œì¡°
ê°œ...ì¡°..?  
ì´ì±…ì—ì„œëŠ” ì»¨í…Œì´ë„ˆ ì•ˆì— ë“¤ì–´ê°€ì„œ ì‘ì—…í•˜ê³  ë³€ë™ì‚¬í•­ì´ ë°œìƒí•œê²ƒì„ ê°œì¡°ë¼ê³  í‘œí˜„í–ˆë‹¤..  
ì´ë¯¸ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì— ì ‘ì†í•˜ê¸°ìœ„í•´ì„œëŠ” ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•œë‹¤.  

- ì»¨í…Œì´ë„ˆ ì ‘ì†
```bash
$ docker exec -it [ì»¨í…Œì´ë„ˆ ì´ë¦„] bash
```

----

## 6. ë„ì»¤ í—ˆë¸Œ ë¡œê·¸ì¸

### ì´ë¯¸ì§€ëŠ” ì–´ë””ì„œ ë‚´ë ¤ë°›ëŠ” ê±¸ê¹Œ? => ë„ì»¤í—ˆë¸Œ!  
ë„ì»¤íŒŒì¼ì„ ì²˜ìŒ ì‘ì„±í• ë•Œë§ˆë‹¤ FROM ì¸ìŠ¤íŠ¸ëŸ­ì…˜ ë’¤ì— í•„ìš”í•œ ì´ë¯¸ì§€ë¥¼ ì ì–´ ë„£ì—ˆë‹¤.  
ê·¸ëŸ¼ ì´ ì´ë¯¸ì§€ë“¤ì€ ì–´ë””ì„œ ì˜¤ëŠ” ê±¸ê¹Œ?  
ë°”ë¡œ ë„ì»¤í—ˆë¸Œì´ë‹¤.  

- ë„ì»¤í—ˆë¸Œ? ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬?  
ì´ë¯¸ì§€ë¥¼ ë°°í¬í•˜ëŠ” ì¥ì†Œë¥¼ í†µì¹­ `ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬` ë¼ê³  í•˜ê³   
`ë„ì»¤í—ˆë¸Œ`ëŠ” 'ë„ì»¤ ì œì‘ì‚¬ì—ì„œ ìš´ì˜í•˜ëŠ” ê³µì‹ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬' ë¥¼ ë§í•œë‹¤.  

- ë ˆì§€ìŠ¤íŠ¸ë¦¬ vs ë ˆíŒŒì§€í† ë¦¬  
`ë ˆì§€ìŠ¤íŠ¸ë¦¬`ëŠ” ì´ë¯¸ì§€ë¥¼ ë°°í¬í•˜ëŠ” **ì¥ì†Œ** ì´ê³ ,  
`ë ˆíŒŒì§€í† ë¦¬`ëŠ” ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ êµ¬ì„±í•˜ëŠ” **ë‹¨ìœ„** ì´ë‹¤.  

ê¹ƒí—ˆë¸Œë¡œ ë¹„ìœ í•˜ìë©´, ë ˆì§€ìŠ¤íŠ¸ë¦¬ëŠ” ê¹ƒí—ˆë¸Œ..  
ë ˆíŒŒì§€í† ë¦¬ëŠ” ë ˆíŒŒì§€í† ë¦¬.. OK?  

ë„ì»¤ í—ˆë¸Œì— ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ë ¤ë©´ ì´ë¯¸ì§€ë§ˆë‹¤ íƒœê·¸ë¥¼ ë¶€ì—¬í•´ì•¼í•œë‹¤.  
ì•„ë˜ëŠ” íƒœê·¸ ë¶™ì´ëŠ” ì˜ˆì‹œì´ë‹¤.  
`hama.com/hama_devops_study:0.0.1`  
[ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì£¼ì†Œ]/[ë ˆí¬ì§€í† ë¦¬ ì´ë¦„]:[ë²„ì „] í˜•ì‹ì„ ëˆë‹¤.  
ì™ ë§Œí•˜ë©´ ë²„ì „ì„ ë¶™ì—¬ì£¼ì.. ë‚˜ì¤‘ì— ê³¨ì¹˜ ì•„í”„ë‹¤..  

ì´ë¯¸ ì´ë¯¸ì§€ì— íƒœê·¸ë¥¼ ë‹¬ì§€ì•Šê³  ì˜¬ë ¤ë²„ë ¸ë‹¤..  
í•˜ì§€ë§Œ ê±±ì •ë§ˆì‹œë¼.. ë‚˜ì¤‘ì—ë„ ë¶™ì¼ ìˆ˜ ìˆë‹¤.  
```bash
$ docker tag [ì›ë³¸ ì´ë¯¸ì§€ ì´ë¦„] [ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì£¼ì†Œ]/[ë ˆíŒŒì§€í† ë¦¬]:ë²„ì „
```
ìœ„ ì»¤ë§¨ë“œë¡œ íƒœê·¸ë¥¼ ë¶™ì—¬ì£¼ë©´ íƒœê·¸ê°€ ë¶™ì€ ìƒˆë¡œìš´ ì´ë¯¸ì§€ê°€ ìƒì„±(ë³µì œ)ëœë‹¤.  

- ë¡œì»¬ì—ì„œ ë„ì»¤í—ˆë¸Œì— ì´ë¯¸ì§€ ì—…ë¡œë“œ  
ë ˆíŒŒì§€í† ë¦¬ëŠ” ì²˜ìŒ ì—…ë¡œë“œí•  ë•ŒëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.  
push ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ë©´ì„œ ìë™ ìƒì„±ëœë‹¤.  
```bash
$ docker push [ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì£¼ì†Œ]/[ë ˆíŒŒì§€í† ë¦¬ ì´ë¦„]:[ë²„ì „]
```

- ë¹„ê³µê°œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë§Œë“œëŠ” ë°©ë²•  
ì™¸ë¶€ ê³µê°œ ëª©ì ì´ ì•„ë‹Œ ì‚¬ë‚´ ê°œë°œì´ ëª©ì ì´ë¼ë©´ ëŒ€ê²Œ ì‚¬ë‚´ìš© ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ë§Œë“¤ê³   
ì—¬ê¸°ì— ê°œë°œí™˜ê²½ ì´ë¯¸ì§€ë¥¼ ë°°í¬í•˜ëŠ” ì²´ê³„ë¥¼ ê°–ëŠ”ë‹¤ê³  í•œë‹¤.  
ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ëŠ” ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.  

ë ˆì§€ìŠ¤íŠ¸ë¦¬ìš© ì»¨í…Œì´ë„ˆ(`registry`)ê°€ ë”°ë¡œ ìˆìœ¼ë¯€ë¡œ ì´ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.  
ì¦‰, ë ˆì§€ìŠ¤íŠ¸ë¦¬ë„ ë„ì»¤ë¥¼ í†µí•´ ìš´ì˜ì´ ê°€ëŠ¥í•˜ë‹¤.  

- docker-compose.yaml íŒŒì¼ë¡œ ë§Œë“¤ì–´ ë³´ë©´, ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.  

ì´ê±¸ ì œëŒ€ë¡œ êµ¬ì¶•í•˜ë ¤ë©´ SSL ì¸ì¦ë¶€í„° ë„ë©”ì¸ê¹Œì§€ ì¤€ë¹„í•´ì•¼ í•  ê²ƒì´ ë„ˆë¬´ ë§ë‹¤.  
ê·¸ëƒ¥ AWS ECR ì„ ì“°ë„ë¡ í•˜ì..  
AWS ECR ê³¼ ë„ì»¤ ë¹„ê³µê°œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ëŠ” ê°™ì€ ê°œë…ì´ë‹¤.  
í˜¸ìŠ¤íŒ… ì£¼ì²´ê°€ AWS ëƒ Docker ëƒì˜ ì°¨ì´ì¼ ë¿..  
```yaml
version: "3"
services:
  registry:
    restart: always
    image: registry:2
    ports:
      - 8888:5000
    environment:
      REGISTRY_HTTP_TLS_CERTIFICATE: /certs/domain.crt
      REGISTRY_HTTP_TLS_KEY: /certs/domain.key
    volumes:
      - ./path/:/var/lib/registry
      - $HOME/docker_registry/certs:/certs
```

----

## 7. ë„ì»¤ ì»´í¬ì¦ˆ
ê°œë°œìë¼ë©´..! ì •ë§ ì •ë§ ì•Œì•„ë†“ìœ¼ë©´ ì—…ë¬´íš¨ìœ¨ì´ ì¦ëŒ€ë˜ëŠ” ê¿€ ê¸°ìˆ ì´ë¼ê³  ìƒê°í•œë‹¤.  
ë„ì»¤ë¥¼ ì‚¬ìš©í•˜ë‹¤ ë³´ë©´ `docker run ...` ì´ëŸ°ì‹ìœ¼ë¡œ ë„ì»¤ ëª…ë ¹ì–´ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ê´€ë¦¬í•œë‹¤.  
ê·¸ëŸ°ë° ì˜µì…˜ì´ í•œë‘ê°œì¼ë•ŒëŠ” ë³„ ìƒê´€ì´ ì—†ì§€ë§Œ 3ê°œ, 4ê°œ ê·¸ ì´ìƒì´ ë˜ê¸° ì‹œì‘í•˜ë©´.. í—·ê°ˆë¦¬ê³  ë§¤ë²ˆ ê·¸ ê¸´ ëª…ë ¹ì–´ë¥¼ ê¸°ì–µí•˜ê¸°ë€ ì •ë§ ì‰½ì§€ ì•Šì€ ì¼ì´ë‹¤.  

ë„ì»¤íŒŒì¼ì€ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤ë©´, ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ì€ ì»¨í…Œì´ë„ˆë¥¼ ë„ìš°ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤ê³  í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.  
  
í•˜ì§€ë§Œ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì‚¬ìš©í•˜ë©´ ìœ„ ë¬¸ì œë¥¼ í•´ê²° í•  ìˆ˜ ìˆë‹¤!  
ì˜ˆë¥¼ ë“¤ì–´ë³´ë©´,  
`docker run -dit --gpus all -e NVIDIA_VISIBLE_DEVICES=all -v ./Projects:/home/hama/Projects --workdir /home/hama/Projects --restart always --network host --name examples_1 examples:0.0.3 /bin/bash`  
ë³´ê¸°ë§Œí•´ë„.. ì •ì‹ ì‚¬ë‚©ë‹¤..  

ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ì„ ì‘ì„±í•´ë³´ì.  
```yaml
version: "3"
services:
  examples:
    image: examples:0.0.3
    container_name: examples_1
    runtime: nvidia
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
    volumes:
      - ./Projects:/home/hama/Projects
    working_dir: /home/hama/Projects
    network_mode: "host"
    tty: true
    restart: always
```
ì´ì²˜ëŸ¼ ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ì„ ì‘ì„±í•˜ë©´ ê¸¸ê²Œ ëŠ˜ì–´ì ¸ ìˆëŠ” ë„ì»¤ ì˜µì…˜ì„ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆë‹¤. = ê°€ë…ì„± í–¥ìƒ!  
ê·¸ë¦¬ê³  ì™¸ìš°ì§€ ì•Šì•„ë„ íŒŒì¼ë¡œ ê´€ë¦¬ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í”„ë¡œì íŠ¸ê°€ ë§ì•„ì ¸ë„ ê´€ë¦¬ì˜ ë¶€ë‹´ì´ ì¤„ì–´ë“ ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.  

ì‚¬ì‹¤ ì´ê²Œ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ì²«ë²ˆì§¸ ì´ìœ ì´ê³ ..  
ë‘ë²ˆì§¸ëŠ” ë„ì»¤ ë„¤íŠ¸ì›Œí¬, ë„ì»¤ ë³¼ë¥¨ì„ ì´ íŒŒì¼ì•ˆì—ì„œ ì •ì˜ í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤.    

ìœ„ ì˜ˆì œëŠ” ë¡œì»¬ ì„œë²„ì— ì´ë¯¸ ìˆëŠ” ì´ë¯¸ì§€ë¡œ `ì»¨í…Œì´ë„ˆë¥¼ ë„ìš°ê¸°` ìœ„í•œ ì»´í¬ì¦ˆíŒŒì¼ ì˜ˆì‹œì´ê³   
ì•„ë˜ëŠ” ì›í•˜ëŠ” ì´ë¯¸ì§€ê°€ ì—†ì„ ë•Œ ë¯¸ë¦¬ ì‘ì„±í•´ë‘” ë„ì»¤íŒŒì¼ë¡œ `ì´ë¯¸ì§€ë¥¼ ë¹Œë“œ`í•˜ëŠ” ì˜ˆì‹œì´ë‹¤.  
```yaml
version: "3"
services:
  examples:
    image: examples:0.0.3
    container_name: examples_1
    build:
      context: .
      dockerfile: Dockerfile
    runtime: nvidia
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
    volumes:
      - ./Projects:/home/hama/Projects
    working_dir: /home/hama/Projects
    network_mode: "host"
    tty: true
```
ì´ì²˜ëŸ¼ ë¹Œë“œ ì‹œìŠ¤í…œ?ìœ¼ë¡œì„œë„ í™œìš©ì´ ê°€ëŠ¥í•˜ë‹¤.  

ì»¨í…Œì´ë„ˆë¥¼ ì—¬ëŸ¬ê°œ ì •ì˜í•´ì„œ í•œë²ˆì— ë„ìš°ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.  
```yaml
version: "3"
services:
    vision:
        container_name: vision
        image: vision:0.0.1
        build:
          context: ./
          dockerfile: vision/Dockerfile
        runtime: nvidia
        volumes:
         - ./:/Projects
        ports:
         - 8000:8000
        working_dir: /Projects
        tty: true
        restart: always
        command: >
          python3 main.py
          --host=0.0.0.0
          --port=8000
          --config=/Projects/vision/configs/config.json

    analyzer:
        container_name: analyzer
        image: analyzer:0.0.1
        build:
            context: ./
            dockerfile: notifier/Dockerfile
        volumes:
         - ./:/Projects
        working_dir: /Projects
        tty: true
        restart: always
        command: python3 main.py -c /Projects/analyzer/configs/config.json

    recorder:
        container_name: recorder
        image: recorder:0.0.1
        build:
            context: ./
            dockerfile: recorder/Dockerfile
        volumes:
         - ./:/Projects
        working_dir: /Projects
        tty: true
        restart: always
        command: python3 main.py -c /Projects/recorder/configs/config.json

    storage:
        container_name: storage
        image: python:3.7-alpine
        volumes:
         - /hdd_ext/outputs:/outputs/
        ports:
         - 9805:9805
        restart: always
        working_dir: /outputs/
        command: python3 -m http.server 9805

    monitor:
        container_name: monitor
        image: monitor:0.0.1
        build:
            context: ./
            dockerfile: monitor/Dockerfile
        privileged: true
        volumes:
         - ./:/Projects
        working_dir: /Projects
        tty: true
        restart: always
        command: python3 main.py -c /Projects/monitor/configs/config.json
```
ë§ˆêµ¬ì¡ì´ë¡œ ì‘ì„±í•˜ê¸´ í–ˆì§€ë§Œ..  
ëŒ€ì¶© ì´ëŸ° ëŠë‚Œìœ¼ë¡œ í¬íŠ¸ë¥¼ ì—´ì–´ ë°ì´í„°ë¥¼ ë„˜ê¸¸ ìˆ˜ë„ ìˆê³   
í•œêº¼ë²ˆì—(ë™ì‹œì—) ê´€ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.  

----

## 8. ì¿ ë²„ë„¤í‹°ìŠ¤
(ì‘ì„±ì¤‘...)
